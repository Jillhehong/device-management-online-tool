
<div class="container-fluid" ng-controller="deviceManagementQueryController" >
    <br>
    <div ng-if="queryCtrl.show" dismiss-on-timeout="5000" uib-alert class=" alert {{queryCtrl.type}}" close="queryCtrl.closeAlert()">{{queryCtrl.msg}}</div>
  <!--search-->
    <div class="row">
        <uib-accordion class="col-sm-10">
            <div uib-accordion-group class="panel-default" is-open="status.open">
                <uib-accordion-heading>
                    <div>
                        <strong>query <i class="pull-right glyphicon" ng-class="{'fa fa-angle-double-up fa-lg': status.open, 'fa fa-angle-double-down fa-lg': !status.open}"></i></strong>
                    </div>
                </uib-accordion-heading>
                <form class="form-inline" id="filter">
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <label for="device_sn">Device SN:</label>
                        <input type="text" ng-model="queryCtrl.query.device_sn" class="form-control mb-2 mr-sm-2 mb-sm-0" name="device_sn" placeholder="Device SN">
                    </div>
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <label  for="clinic">Clinic:</label>
                        <input type="text" ng-model="queryCtrl.query.clinic"  class="form-control form-control mb-2 mr-sm-2 mb-sm-0" name="clinic" placeholder="Clinic">
                    </div>
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <label  for="status">Device status:</label>
                        <input type="text" ng-model="queryCtrl.query.status" class="form-control form-control mb-2 mr-sm-2 mb-sm-0" name="status" placeholder="status">
                    </div>
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <label  for="location">Device location:</label>
                        <input type="text" ng-model="queryCtrl.query.location" class="form-control form-control mb-2 mr-sm-2 mb-sm-0" name="location" placeholder="location">
                    </div>
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                        <br>
                        <button class="btn btn-default" ng-click="queryCtrl.search()"><span class="fa fa-search"></span>search</button>
                    </div>
                </form>
            </div>
        </uib-accordion>
    </div>

    <!--not found, show message-->
    <div class="row">
        <div class="col-sm-offset-3 col-sm-3 text-center" id="query_result" ng-show="queryCtrl.queryResult">no result found!</div>
    </div>
    <br>
    <!--start table-->
    <div class="container-fluid">
        <table  class="table table-condensed  table-hover table-striped table-responsive">
            <!--table columns-->
            <th width="200%">Actions</th>
            <th ng-repeat="title in queryCtrl.tableColumns">{{title}}</th>
            <!--end-->

            <!--start table data-->
            <tr ng-repeat="value in queryCtrl.results track by $index">
                <!--add edit and delete buttons-->
                <td><button  class=" btn btn-default btn-sm" ng-click="queryCtrl.showModal($index,'lg')">
                    <span class="glyphicon glyphicon-pencil"></span></button>
                    <button class="btn btn-danger btn-sm" ng-click="queryCtrl.deleteModal($index)">
                    <span class="glyphicon glyphicon-trash"></span></button>
                </td><!-- end -->

                <td>{{value.purchase_order}}</td>
                <td>{{value.registration_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.device_sn}}</td>
                <td>{{value.iccid}}</td>
                <td>{{value.imei}}</td>
                <td>{{value.model_number}}</td>
                <td>{{value.model_description}}</td>
                <td>{{value.firmware_version}}</td>
                <td>{{value.manufacturer}}</td>
                <td>{{value.points_to}}</td>
                <td>{{value.use_zywie_sim}}</td>
                <td>{{value.sim_provider}}</td>
                <td>{{value.zywie_logo}}</td>
                <td>{{value.wyless_provision_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.device_test_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.device_suspension_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.status}}</td>
                <td>{{value.location}}</td>
                <td>{{value.checked_out_by}}</td>
                <td>{{value.checked_out_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.checked_in_by}}</td>
                <td>{{value.checked_in_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.salesteam}}</td>
                <td>{{value.salesperson_name}}</td>
                <td>{{value.enterprise_id}}</td>
                <td>{{value.parent_clinic}}</td>
                <td>{{value.sub_clinic}}</td>
                <td>{{value.physician}}</td>
                <td>{{value.billable}}</td>
                <td>{{value.lease}}</td>
                <td>{{value.lease_price_per_month}}</td>
                <td>{{value.lease_start_date |date: 'yyyy-MM-dd'}}</td>
                <td>{{value.lease_end_date |date: 'yyyy-MM-dd'}}</td>
            </tr>

        </table>
    </div>
</div>
